<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Job Tracker</title>
</head>
<body>
<h2>Job Entry Form</h2>
<form id="jobForm">
  <input type="text" name="job_number" placeholder="Job Number" required><br><br>
  <input type="text" name="customer_name" placeholder="Customer Name" required><br><br>
  <select name="job_state" required>
    <option value="">Select State</option>
    <option value="Pending">Pending</option>
    <option value="In Progress">In Progress</option>
    <option value="Completed">Completed</option>
  </select><br><br>
  <input type="datetime-local" name="job_in_time" required><br><br>
  <input type="datetime-local" name="job_out_time"><br><br>
  <textarea name="remark" placeholder="Remark"></textarea><br><br>
  <button type="button" onclick="submitForm()">Submit</button>
</form>
<p id="status"></p>

<script>
async function submitForm(){
    const form = document.getElementById('jobForm');
    const data = {
        job_number: form.job_number.value,
        customer_name: form.customer_name.value,
        job_state: form.job_state.value,
        job_in_time: form.job_in_time.value,
        job_out_time: form.job_out_time.value,
        remark: form.remark.value
    };

    const res = await fetch('/submit_job', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    });

    const result = await res.json();
    document.getElementById('status').innerText = result.status === "success" ? "Job saved!" : "Error!";
    form.reset();
}
</script>
</body>
</html>
